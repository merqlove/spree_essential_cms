<% content_for :page_actions do %>
  <%= button_link_to  t("new_content"), new_object_url, :icon => 'add', :class => "btn-success", :id => "new_content_link" %>
<% end if can? :create, Spree::Content %>

<% content_for :page_title do %>
  <%= t('.listing_contents') %>
<% end %>

<%= render :partial => 'spree/admin/shared/page_tabs', :locals => {:current => 'Contents'} %>

<table id="listing_contents" class="index sortable table" data-sortable-link="<%= update_positions_admin_page_contents_url(@parent) -%>">
  <thead>
  <tr>
      <th class="no-border"></th>
      <th><%= sort_link @search, :title, t("content.title") %></th>
      <th><%= sort_link @search, :context, t("content.context") %></th>
      <th><%= t("action") %></th>
  </tr>
  </thead>
  <tbody>
    <%- @collection.each do |content|%>
    <tr class="spree_content" id="spree_content_<%= spree_dom_id content %>">
      <td class="move-handle">
        <span class="icon icon-sort handle"></span>
      </td>
      <td><%= link_to content.title, object_url(content) %></td>
      <td><%= content.context %>
      <td>
        <%= link_to_edit content, :no_text => true%> &nbsp;
        <%= link_to_delete content, :no_text => true %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @collection %>

<% content_for :sidebar do %>

<div class="box">
  <h3><%= t(:search) %></h3>

  <% @content = Spree::Content.search %>
  <%= search_form_for [:admin, @parent, @content] do |f| %>
    <%= f.field_container :title_cont, class: ['form-group'] do %>
      <label><%= t('content.title') %></label><br />
      <%= f.text_field :title_cont, :size => 25, :class => "form-control" %>
    <% end %>
    <p><%= button t("search") %></p>
  <% end %>
</div>
<% end %>
